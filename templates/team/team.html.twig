{% extends 'base.html.twig' %}

{% block title %}Équipe - TaskLinker
{% endblock %}

{% block header %}
	<h1>Équipe</h1>
{% endblock %}

{% block body %}
	<div id="content">
		<table id="team-container">
			<thead>
				<tr>
					<th>Prénom, Nom</th>
					<th>Statut</th>
					<th>Rôle</th>
					<th class="{% if not is_granted('ROLE_ADMIN') %}hidden-column{% endif %}">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% for employee in team %}
					<tr>
						<td>
							<div class="employee-infos">
								<div class="employee-avatar">
									{{ employee.firstname|first ~ employee.lastname|first }}
								</div>
								<div class="employee-coords">
									<strong>{{ employee.firstname }}
										{{ employee.lastname }}</strong>
									<span>{{ employee.email }}</span>
								</div>
							</div>
						</td>
						<td>{{ employee.status }}</td>
						<td>
							{% if 'ROLE_ADMIN' in employee.roles ?? [] %}
								Chef de projet
							{% else %}
								Collaborateur
							{% endif %}
						</td>
						<td class="admin-column">
							{% if is_granted('ROLE_ADMIN') %}
								<a class="button button-edit-team" href="{{ path('app_edit_team', {id: employee.id}) }}">
									Éditer
								</a>
								<a class="delete-team" href="{{ path('app_delete_team', {id: employee.id}) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce membre ?');">
									Supprimer
								</a>
							{% else %}
								&nbsp;
								{# garde la cellule vide mais visible #}
							{% endif %}
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="4">Aucun employé trouvé</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
